<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Java quick start &mdash; AMPL API 1.2.2 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/ampl.ico"/>
    <link rel="top" title="AMPL API 1.2.2 documentation" href="index.html" />
    <link rel="next" title="Java API reference" href="reference.html" />
    <link rel="prev" title="Class structure" href="class-structure.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="reference.html" title="Java API reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="class-structure.html" title="Class structure"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">AMPL API 1.2.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Java quick start</a><ul>
<li><a class="reference internal" href="#complete-listing">Complete listing</a></li>
<li><a class="reference internal" href="#create-a-project-and-add-references">Create a project and add references</a><ul>
<li><a class="reference internal" href="#creating-a-new-project">Creating a new project</a></li>
<li><a class="reference internal" href="#add-a-reference-to-the-ampl-java-library">Add a reference to the AMPL Java library</a></li>
</ul>
</li>
<li><a class="reference internal" href="#java-imports-and-ampl-environment-creation">Java imports and AMPL environment creation</a></li>
<li><a class="reference internal" href="#load-a-model-from-file">Load a model from file</a></li>
<li><a class="reference internal" href="#solve-a-problem">Solve a problem</a></li>
<li><a class="reference internal" href="#get-an-ampl-entity-in-the-programming-environment-get-objective-value">Get an AMPL entity in the programming environment (get objective value)</a></li>
<li><a class="reference internal" href="#modify-model-data-assign-values-to-parameters">Modify model data (assign values to parameters)</a></li>
<li><a class="reference internal" href="#get-numeric-values-from-variables">Get numeric values from variables</a></li>
<li><a class="reference internal" href="#get-arbitrary-values-via-ampl-expressions">Get arbitrary values via ampl expressions</a></li>
<li><a class="reference internal" href="#close-the-ampl-object-to-free-the-resources">Close the AMPL object to free the resources</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="class-structure.html"
                        title="previous chapter">Class structure</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="reference.html"
                        title="next chapter">Java API reference</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quick-start.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="java-quick-start">
<span id="secjavaquickstart"></span><h1>Java quick start<a class="headerlink" href="#java-quick-start" title="Permalink to this headline">¶</a></h1>
<p>This section will show a simple example to illustrate various functionalities of the AMPL Java interface.
The full example prints the version of the AMPL interpreter used, loads a model from file and the corresponding
data file, solves it, gets some of the AMPL entities in Java and uses them to get the results and to assign data
programmatically. This section assumes that you are already familiar with the Java language. Where screenshots are
displayed, they refer to <a class="reference external" href="http://www.eclipse.org">Eclipse</a>, a free development environment.
Full class reference is given in <a class="reference internal" href="reference.html#secreferencejava"><span>Java API reference</span></a>.</p>
<div class="section" id="complete-listing">
<h2>Complete listing<a class="headerlink" href="#complete-listing" title="Permalink to this headline">¶</a></h2>
<p>This is the complete listing of the example. Please note that, for clarity of presentation,
all the code in the examples below does not include exceptions handling.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">AMPL</span> <span class="n">ampl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AMPL</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="c1">// Interpret the two files</span>
    <span class="n">ampl</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="s">&quot;../models/diet.mod&quot;</span><span class="o">);</span>
    <span class="n">ampl</span><span class="o">.</span><span class="na">readData</span><span class="o">(</span><span class="s">&quot;../models/diet.dat&quot;</span><span class="o">);</span>

    <span class="c1">// Solve</span>
    <span class="n">ampl</span><span class="o">.</span><span class="na">solve</span><span class="o">();</span>

    <span class="c1">// Get objective entity by AMPL name</span>
    <span class="n">Objective</span> <span class="n">totalcost</span> <span class="o">=</span> <span class="n">ampl</span><span class="o">.</span><span class="na">getObjective</span><span class="o">(</span><span class="s">&quot;total_cost&quot;</span><span class="o">);</span>
    <span class="c1">// Print it</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Objective is: %f%n&quot;</span><span class="o">,</span> <span class="n">totalcost</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>

    <span class="c1">// Reassign data - specific instances</span>
    <span class="n">Parameter</span> <span class="n">cost</span> <span class="o">=</span> <span class="n">ampl</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&quot;cost&quot;</span><span class="o">);</span>
    <span class="n">cost</span><span class="o">.</span><span class="na">setValues</span><span class="o">(</span><span class="k">new</span> <span class="n">Object</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;BEEF&quot;</span><span class="o">,</span> <span class="s">&quot;HAM&quot;</span> <span class="o">},</span> <span class="k">new</span> <span class="kt">double</span><span class="o">[]</span> <span class="o">{</span> <span class="mf">5.01</span><span class="o">,</span> <span class="mf">4.55</span> <span class="o">});</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Increased costs of beef and ham.&quot;</span><span class="o">);</span>

    <span class="c1">// Resolve and display objective</span>
    <span class="n">ampl</span><span class="o">.</span><span class="na">solve</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;New objective value: %f%n&quot;</span><span class="o">,</span> <span class="n">totalcost</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>

    <span class="c1">// Reassign data - all instances</span>
    <span class="n">cost</span><span class="o">.</span><span class="na">setValues</span><span class="o">(</span><span class="k">new</span> <span class="kt">double</span><span class="o">[]</span> <span class="o">{</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mf">5.01</span><span class="o">,</span> <span class="mf">4.55</span> <span class="o">});</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Updated all costs&quot;</span><span class="o">);</span>

    <span class="c1">// Resolve and display objective</span>
    <span class="n">ampl</span><span class="o">.</span><span class="na">solve</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;New objective value: %f%n&quot;</span><span class="o">,</span> <span class="n">totalcost</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>

    <span class="c1">// Get the values of the variable Buy in a dataframe object</span>
    <span class="n">Variable</span> <span class="n">buy</span> <span class="o">=</span> <span class="n">ampl</span><span class="o">.</span><span class="na">getVariable</span><span class="o">(</span><span class="s">&quot;Buy&quot;</span><span class="o">);</span>
    <span class="n">DataFrame</span> <span class="n">df</span> <span class="o">=</span> <span class="n">buy</span><span class="o">.</span><span class="na">getValues</span><span class="o">();</span>
    <span class="c1">// Print them</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">df</span><span class="o">);</span>

    <span class="c1">// Get the values of an expression into a DataFrame object</span>
    <span class="n">DataFrame</span> <span class="n">df2</span> <span class="o">=</span> <span class="n">ampl</span><span class="o">.</span><span class="na">getData</span><span class="o">(</span><span class="s">&quot;{j in FOOD} 100*Buy[j]/Buy[j].ub&quot;</span><span class="o">);</span>
    <span class="c1">// Print them</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">df2</span><span class="o">);</span>


<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="n">ampl</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-project-and-add-references">
<h2>Create a project and add references<a class="headerlink" href="#create-a-project-and-add-references" title="Permalink to this headline">¶</a></h2>
<p>This section depends on the chosen development environment. The screenshots below refer to Eclipse.</p>
<div class="section" id="creating-a-new-project">
<h3>Creating a new project<a class="headerlink" href="#creating-a-new-project" title="Permalink to this headline">¶</a></h3>
<p>Open Eclipse, choose an appropriate workspace and create a new Java project as shown in
figure <a class="reference internal" href="#figeclipsecreateproject"><span>Create a project</span></a>.
Please note that the minimum required JRE is version 1.6.</p>
<div class="align-center figure" id="id1">
<span id="figeclipsecreateproject"></span><a class="reference internal image-reference" href="_images/CreateProject.png"><img alt="Create a new project in eclipse" src="_images/CreateProject.png" style="width: 371px; height: 500px;" /></a>
<p class="caption"><span class="caption-text">Create a project</span></p>
</div>
</div>
<div class="section" id="add-a-reference-to-the-ampl-java-library">
<h3>Add a reference to the AMPL Java library<a class="headerlink" href="#add-a-reference-to-the-ampl-java-library" title="Permalink to this headline">¶</a></h3>
<p>Right click on the project name, click on <span class="guilabel">Properties</span>, select the tab <span class="guilabel">Java Build Path</span>
and in the tab <span class="guilabel">Libraries</span> click on <span class="guilabel">Add External JARs</span> (figure <a class="reference internal" href="#figeclipseaddreferences"><span>Add references to Eclipse</span></a>)
and select the file <strong>ampl-1.0.jar</strong> which can be found in the AMPL API installation directory.
This will give access to all the types and methods defined in the library.
The reference AMPL API should now be visible in the Referenced Libraries folder in the Package Explorer.</p>
<div class="align-center figure" id="id2">
<span id="figeclipseaddreferences"></span><a class="reference internal image-reference" href="_images/AddReferences.png"><img alt="Add references" src="_images/AddReferences.png" style="width: 400px; height: 277px;" /></a>
<p class="caption"><span class="caption-text">Add references to Eclipse</span></p>
</div>
<p>The resulting package explorer view is shown in figure <a class="reference internal" href="#figeclipsedonereferences"><span>Project with properly configured references</span></a> below.</p>
<div class="align-center figure" id="id3">
<span id="figeclipsedonereferences"></span><a class="reference internal image-reference" href="_images/ResultingReferences.png"><img alt="Project with properly configured references" src="_images/ResultingReferences.png" style="width: 595px; height: 129px;" /></a>
<p class="caption"><span class="caption-text">Project with properly configured references</span></p>
</div>
</div>
</div>
<div class="section" id="java-imports-and-ampl-environment-creation">
<h2>Java imports and AMPL environment creation<a class="headerlink" href="#java-imports-and-ampl-environment-creation" title="Permalink to this headline">¶</a></h2>
<p>For a simple hello world program, first import the needed classes from the library,
with the following statements:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ampl.AMPL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ampl.DataFrame</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ampl.Objective</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ampl.Parameter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ampl.Variable</span><span class="o">;</span>
</pre></div>
</div>
<p>Then copy the following statements to have a hello world application which gets the value
of the option <cite>version</cite> as defined in the underlying AMPL executable and prints the result
on the console.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">AMPL</span> <span class="n">ampl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AMPL</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ampl</span><span class="o">.</span><span class="na">getOption</span><span class="o">(</span><span class="s">&quot;version&quot;</span><span class="o">));</span>
</pre></div>
</div>
<p>The first line creates a new Ampl object with all default settings.
The second, which is the preferred way to access AMPL options, gets the value of the option
<cite>version</cite> from AMPL as a string and prints the result on the active console.</p>
</div>
<div class="section" id="load-a-model-from-file">
<h2>Load a model from file<a class="headerlink" href="#load-a-model-from-file" title="Permalink to this headline">¶</a></h2>
<p>The following lines use the method <a class="reference internal" href="com/ampl/AMPL.html#com.ampl.AMPL.read(String)" title="com.ampl.AMPL.read(String)"><code class="xref java java-ref docutils literal"><span class="pre">AMPL.read</span></code></a> to load a model and data stored in external (AMPL) files.
If the files are not found, an IOException is thrown.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">ampl</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="s">&quot;../models/diet.mod&quot;</span><span class="o">);</span>
<span class="n">ampl</span><span class="o">.</span><span class="na">readData</span><span class="o">(</span><span class="s">&quot;../models/diet.dat&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>Once these commands are executed, the AMPL interpreter will have interpreted the content of the two files.
No further communication is made between the AMPL interpreter and the Java object, as every entity is created lazily (as needed).</p>
</div>
<div class="section" id="solve-a-problem">
<h2>Solve a problem<a class="headerlink" href="#solve-a-problem" title="Permalink to this headline">¶</a></h2>
<p>To solve the currently loaded problem instance, it is sufficient to issue the command:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">ampl</span><span class="o">.</span><span class="na">solve</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="get-an-ampl-entity-in-the-programming-environment-get-objective-value">
<h2>Get an AMPL entity in the programming environment (get objective value)<a class="headerlink" href="#get-an-ampl-entity-in-the-programming-environment-get-objective-value" title="Permalink to this headline">¶</a></h2>
<p>AMPL API provides java representations of the AMPL entities. Usually, not all the entities are
of interest for the programmer. The generic procedure is:</p>
<ol class="arabic simple">
<li>Identify the entities that need interaction (either data read or modification)</li>
<li>For each of these entities, create an object of the appropriate class in Java</li>
<li>Get the entity through the AMPL API using <a class="reference internal" href="com/ampl/AMPL.html#com.ampl.AMPL.getEntity(String)" title="com.ampl.AMPL.getEntity(String)"><code class="xref java java-ref docutils literal"><span class="pre">AMPL.getEntity</span></code></a> or one of its type safe alternatives (<a class="reference internal" href="com/ampl/AMPL.html#com.ampl.AMPL.getVariable(String)" title="com.ampl.AMPL.getVariable(String)"><code class="xref java java-ref docutils literal"><span class="pre">AMPL.getVariable</span></code></a>, <a class="reference internal" href="com/ampl/AMPL.html#com.ampl.AMPL.getParameter(String)" title="com.ampl.AMPL.getParameter(String)"><code class="xref java java-ref docutils literal"><span class="pre">AMPL.getParameter</span></code></a>, <a class="reference internal" href="com/ampl/AMPL.html#com.ampl.AMPL.getObjective(String)" title="com.ampl.AMPL.getObjective(String)"><code class="xref java java-ref docutils literal"><span class="pre">AMPL.getObjective</span></code></a>  , <a class="reference internal" href="com/ampl/AMPL.html#com.ampl.AMPL.getSet(String)" title="com.ampl.AMPL.getSet(String)"><code class="xref java java-ref docutils literal"><span class="pre">AMPL.getSet</span></code></a>, <a class="reference internal" href="com/ampl/AMPL.html#com.ampl.AMPL.getConstraint(String)" title="com.ampl.AMPL.getConstraint(String)"><code class="xref java java-ref docutils literal"><span class="pre">AMPL.getConstraint</span></code></a>)</li>
</ol>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Objective</span> <span class="n">totalcost</span> <span class="o">=</span> <span class="n">ampl</span><span class="o">.</span><span class="na">getObjective</span><span class="o">(</span><span class="s">&quot;total_cost&quot;</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Objective is: %f%n&quot;</span><span class="o">,</span><span class="n">totalcost</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">value</span><span class="o">());</span>
</pre></div>
</div>
<p>It can be noted that we access an Objective to interrogate AMPL API about the objective function.
It is a collections of objectives. To access the single instance, the function get() should be used in
case of the objective, which gets the only instance of the objective.
Since objectives are often single instance, the value() function has been implemented in the class <a class="reference internal" href="com/ampl/Objective.html#com.ampl.Objective" title="com.ampl.Objective"><code class="xref java java-ref docutils literal"><span class="pre">Objective</span></code></a>.
So, equivalently to the call above, the following call would return the same value, as it gives direct access
to the objective function value:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">totalcost</span><span class="o">.</span><span class="na">value</span><span class="o">();</span>
</pre></div>
</div>
<p>The output of the program above is:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Objective is: 118.05940323955669
</pre></div>
</div>
</div>
<div class="section" id="modify-model-data-assign-values-to-parameters">
<h2>Modify model data (assign values to parameters)<a class="headerlink" href="#modify-model-data-assign-values-to-parameters" title="Permalink to this headline">¶</a></h2>
<p>The input data of an optimisation model is stored in its parameters; these can be scalar or vectorial entities.
Two ways are provided to change the value of vectorial parameter: change specific values or change all values at
once. The example shows an example of both ways, reassigning the values of the parameter costs firstly specifically,
then altogether. Each time, it then solves the model and get the objective function. The function used to change the
values is overloaded, and is in both cases <a class="reference internal" href="com/ampl/Parameter.html#com.ampl.Parameter.setValues(Object)" title="com.ampl.Parameter.setValues(Object)"><code class="xref java java-ref docutils literal"><span class="pre">Parameter.setValues</span></code></a>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Parameter</span> <span class="n">cost</span> <span class="o">=</span> <span class="n">ampl</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&quot;cost&quot;</span><span class="o">);</span>
<span class="n">cost</span><span class="o">.</span><span class="na">setValues</span><span class="o">(</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;BEEF&quot;</span><span class="o">,</span> <span class="s">&quot;HAM&quot;</span> <span class="o">},</span> <span class="k">new</span> <span class="kt">double</span><span class="o">[]</span> <span class="o">{</span> <span class="mf">5.01</span><span class="o">,</span> <span class="mf">4.55</span> <span class="o">});</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Increased costs of beef and ham.&quot;</span><span class="o">);</span>
<span class="n">ampl</span><span class="o">.</span><span class="na">solve</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;New objective value: %f%n&quot;</span><span class="o">,</span> <span class="n">totalcost</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
</pre></div>
</div>
<p>The code above assigns the values 5.01 and 4.55 to the parameter cost for the objects beef and ham respectively.
If the order of the indexing of an entity is known (i.e. for multiple reassignment), it is not necessary to specify
both the index and the value. A collection of values is assigned to each of the parameter values, in the order they are represented in AMPL.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">cost</span><span class="o">.</span><span class="na">setValues</span><span class="o">(</span><span class="k">new</span> <span class="kt">double</span><span class="o">[]</span> <span class="o">{</span><span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mf">5.01</span><span class="o">,</span> <span class="mf">4.55</span> <span class="o">});</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Updated all costs&quot;</span><span class="o">);</span>
<span class="c1">// Resolve and display objective</span>
<span class="n">ampl</span><span class="o">.</span><span class="na">solve</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;New objective value: %f%n&quot;</span><span class="o">,</span> <span class="n">totalcost</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
</pre></div>
</div>
<p>The statements above produce the following output:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Objective is: 118.05940323955669
Increased costs of beef and ham.
New objective value: 144.41572037510653
Updated all costs
New objective value: 164.54375000000002
</pre></div>
</div>
</div>
<div class="section" id="get-numeric-values-from-variables">
<h2>Get numeric values from variables<a class="headerlink" href="#get-numeric-values-from-variables" title="Permalink to this headline">¶</a></h2>
<p>To access all the numeric values contained in a Variable or any other entity, use a <a class="reference internal" href="com/ampl/DataFrame.html#com.ampl.DataFrame" title="com.ampl.DataFrame"><code class="xref java java-ref docutils literal"><span class="pre">DataFrame</span></code></a> object. Doing so, the data is detached from
the entity, and there is a considerable performance gain. To do so, we first get the Variable object from AMPL, then we get its data with the
function <a class="reference internal" href="com/ampl/Entity.html#com.ampl.Entity.getValues(String)" title="com.ampl.Entity.getValues(String)"><code class="xref java java-ref docutils literal"><span class="pre">Entity.getValues</span></code></a>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Get the values of the variable Buy in a dataframe object</span>
<span class="n">Variable</span> <span class="n">buy</span> <span class="o">=</span> <span class="n">ampl</span><span class="o">.</span><span class="na">getVariable</span><span class="o">(</span><span class="s">&quot;Buy&quot;</span><span class="o">);</span>
<span class="n">DataFrame</span> <span class="n">df</span> <span class="o">=</span> <span class="n">buy</span><span class="o">.</span><span class="na">getValues</span><span class="o">();</span>
<span class="c1">// Print them</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">df</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="get-arbitrary-values-via-ampl-expressions">
<h2>Get arbitrary values via ampl expressions<a class="headerlink" href="#get-arbitrary-values-via-ampl-expressions" title="Permalink to this headline">¶</a></h2>
<p>Often we are interested in very specific values coming out of the optimization session. To make use of the power of AMPL expressions and avoiding
cluttering up the environment by creating entities, fetching data through arbitrary AMPL expressions is possible. For this model, we are interested
in knowing how close each decision variable is to its upper bound, in percentage.
We can obtain this data into a dataframe with the code:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Get the values of an expression into a DataFrame object</span>
<span class="n">DataFrame</span> <span class="n">df2</span> <span class="o">=</span> <span class="n">ampl</span><span class="o">.</span><span class="na">getData</span><span class="o">(</span><span class="s">&quot;{j in FOOD} 100*Buy[j]/Buy[j].ub&quot;</span><span class="o">);</span>
<span class="c1">// Print them</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">df2</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="close-the-ampl-object-to-free-the-resources">
<h2>Close the AMPL object to free the resources<a class="headerlink" href="#close-the-ampl-object-to-free-the-resources" title="Permalink to this headline">¶</a></h2>
<p>It is good practice to make sure that the AMPL object is closed and all its resources released when it is not needed anymore.
This can be easily achieved by enclosing all the body of the program in a try block, and by calling the <a class="reference internal" href="com/ampl/AMPL.html#com.ampl.AMPL.close()" title="com.ampl.AMPL.close()"><code class="xref java java-ref docutils literal"><span class="pre">AMPL.close</span></code></a> function in
the finally block.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">AMPL</span> <span class="n">ampl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AMPL</span><span class="o">();</span>
<span class="k">try</span><span class="o">{</span>
   <span class="c1">// use ampl object here</span>
<span class="o">}</span> <span class="k">finally</span><span class="o">{</span>
   <span class="c1">// close all AMPL related resources here</span>
   <span class="n">ampl</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="reference.html" title="Java API reference"
             >next</a> |</li>
        <li class="right" >
          <a href="class-structure.html" title="Class structure"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">AMPL API 1.2.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2013-2015, AMPL Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3+.
    </div>
  </body>
</html>